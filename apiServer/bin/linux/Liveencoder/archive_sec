BASH=/bin/bash

echo 'start'

WORKPATH=/tmp/${USER}

mkdir -p ${WORKPATH}
rm -rf ${WORKPATH}/scheduledEncoder

mkdir ${WORKPATH}/scheduledEncoder
mkdir ${WORKPATH}/scheduledEncoder/bin
mkdir ${WORKPATH}/scheduledEncoder/config
mkdir ${WORKPATH}/scheduledEncoder/lib
mkdir ${WORKPATH}/scheduledEncoder/doc
mkdir ${WORKPATH}/scheduledEncoder/archive

cp -rf bin/liveencoder ${WORKPATH}/scheduledEncoder/bin/
cp -rf config/log.property ${WORKPATH}/scheduledEncoder/config/
cp -rf config/sec.cfg ${WORKPATH}/scheduledEncoder/config/sys.cfg
cp -rf check_exist.sh ${WORKPATH}/scheduledEncoder/check_exist.sh
cp -rf doc/*.docx ${WORKPATH}/scheduledEncoder/doc

cp /home/3rd-party/boost/lib/libboost_system.so.1.55.0 ${WORKPATH}/scheduledEncoder/lib
cp /home/3rd-party/boost/lib/libboost_filesystem.so.1.55.0 ${WORKPATH}/scheduledEncoder/lib
cp /home/3rd-party/boost/lib/libboost_thread.so.1.55.0 ${WORKPATH}/scheduledEncoder/lib
cp /home/3rd-party/boost/lib/libboost_program_options.so.1.55.0 ${WORKPATH}/scheduledEncoder/lib
cp /home/3rd-party/poco/lib/libPocoFoundation.so.16 ${WORKPATH}/scheduledEncoder/lib
cp /home/3rd-party/log4cxx/lib/liblog4cxx.so.10 ${WORKPATH}/scheduledEncoder/lib
cp /home/3rd-party/json-c-0.9/lib/libjson.so.0 ${WORKPATH}/scheduledEncoder/lib
cp /home/3rd-party/libevent-2.0.21/lib/libevent-2.0.so.5 ${WORKPATH}/scheduledEncoder/lib
cp /usr/lib64/libaprutil-1.so.0 ${WORKPATH}/scheduledEncoder/lib
cp /usr/lib64/libapr-1.so.0 ${WORKPATH}/scheduledEncoder/lib


echo build date $1
tar -cjf scheduledEncoder${1}.tar.bz2 -C ${WORKPATH} scheduledEncoder

echo 'end'

